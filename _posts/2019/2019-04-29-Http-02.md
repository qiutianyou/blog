---
layout: post
title: 网络通信——HTTP协议(二)
category: 网络通信
tags: [HTTP]
---

http返回的状态码，http协作

## 状态码的分类
客户端通过http请求服务端，服务端响应时会传会状态码，通过状态码可以得知服务端是否正常处理，以及错误提示。

|错误码|类别|原因短语|
|--|--|--|--|
|1XX|信息性状态码|接受的请求正在处理|
|2XX|成功状态码|请求正常处理完毕|
|3XX|重定向状态码|需要进行附加操作以完成请求|
|4XX|客户端错误码|服务端无法处理请求|
|5XX|服务端错误码|服务端处理请求出现错误|

## 单台主机实现多个域名

http/1.1规范中允许一台http服务器设多个web站点。在互联网中，当我们输入域名访问网站时，域名是需要通过DNS解析称ip地址的，一个主机多个web站点的情况，实际上这个域名使用的都是同一个ip。因此在发起http请求时，需要在头部明确访问主机/域名的资源uri。

## 通信数据转发程序
 http通信时，除了客户端和服务器以外，还有一些用于通信数据转发的应用程序。这些程序可以将客户端的请求发送给通信链路上的下一台服务器，或者能够将服务端的请求返回给请求的那台客户端
 
### 代理
其中代理就是具备这种转发功能的应用程序，扮演者客户端和服务器“中间人”的角色。能够转发客户端请求和返回服务端的响应
<b>每次经过代理服务器转发请求或响应时，会追加via的首部信息</b>

### 网关
网关与代理非常相似，网关能使为通信链路上的服务器提供非http协议。可以将客户端的http协议请求转换为其他协议，利用网关可以提高网络通信的安全性。可以使用网关实现web系统与数据库服务器的连接、与公司的服务系统的连接等。
### 隧道
隧道可以按要求建立一条与服务器连接的通信线路，届时可以使用ssl加密等手段进行通信，隧道的目的就是确保客户端和服务端的安全通信。隧道不会去解析与修改请求，原封不动的将请求送达服务器。隧道将在双方都断开连接的时候关闭


### 为什么要使用代理
使用代理可以利用代理服务器缓存响应的数据，降低网络带宽流量。
第一次请求时，代理服务器转发请求给源服务器，源服务将响应的数据返回给代理服务器，代理服务器会预先在本地缓存一份副本。当代理服务器接收到访问相同资源的请求时，则直接把缓存的副本响应给客户端

### 缓存
缓存是指在存储在客户端或者代理服务器的响应副本，在访问资源时会优先返回缓存副本的响应。
可以通过设置缓存的副本有效期来控制缓存的有效性，如果过期了则再一次请求愿服务器来确认，并更新最新的缓存。
